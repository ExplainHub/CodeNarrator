# aiEngine.js Documentation

## 1. File Purpose and Functionality

This JavaScript file (`aiEngine.js`) provides a simple interface for interacting with Google's Gemini AI model using the `@google/generative-ai` library.  It handles API key management, model selection, and content generation. The file is designed to be easily integrated into other Node.js projects.  It offers two main functions: one to generate text from a given prompt and another to list available models (currently a placeholder due to limitations in the SDK).

## 2. Key Functions/Classes

### 2.1 `callGemini(prompt)`

* **Description:** This asynchronous function sends a prompt to the specified Gemini AI model and returns the generated content.  It includes robust error handling and logging.
* **Inputs:**
    * `prompt` (string): The text prompt to be sent to the AI model.  Must be a non-empty string.
* **Outputs:**
    * `Promise<string>`: A promise that resolves to the text generated by the AI model. Rejects with an error if the API call fails or the prompt is invalid.
* **Dependencies:** `@google/generative-ai`, `dotenv`, `fs`, `path`, `url`
* **Error Handling:**  Throws an error if the API key is missing, the prompt is invalid, or the API request fails. Provides detailed error messages including stack traces (when available).


### 2.2 `listAvailableModels()`

* **Description:** This asynchronous function attempts to list available Gemini AI models.  Note: Due to limitations in the current `@google/generative-ai` SDK, this function currently only tests connectivity to the default model (`gemini-1.5-flash`) and returns it if successful.  A true model listing functionality is not yet implemented in the SDK.
* **Inputs:** None
* **Outputs:**
    * `Promise<Array>`: A promise that resolves to an array of available models (currently only contains the default model if successful). Rejects with an error if there's a problem accessing the API.
* **Dependencies:** `@google/generative-ai`


## 3. Inputs/Outputs

The primary input for `aiEngine.js` is the `GEMINI_API_KEY` environment variable, which is read from a `.env` file in the project root directory.  The inputs and outputs for the individual functions are described above.

## 4. Dependencies

* `@google/generative-ai`: The official Google client library for interacting with Google's generative AI models.
* `dotenv`: For loading environment variables from a `.env` file.
* `fs`: Node.js's file system module (for checking `.env` file existence).
* `path`: Node.js's path module (for path manipulation).
* `url`: Node.js's URL module (for handling URL imports).


## 5. Important Notes and Warnings

* **API Key:** The script requires a valid Google Gemini API key. This key must be stored securely in a `.env` file in the project root directory, with the key set as the value of the `GEMINI_API_KEY` environment variable.  **Do not hardcode your API key directly into the code.**
* **.env File:** The script explicitly checks for and loads the `.env` file.  If the file is missing or improperly configured, the script will terminate with an error message indicating how to create the file.
* **Error Handling:** The `callGemini` function includes comprehensive error handling to catch and report issues during the API interaction.  Detailed error messages are provided to aid in debugging.
* **Model Listing:** The `listAvailableModels` function is a placeholder;  it currently does not provide a comprehensive list of available models.  This is due to limitations in the current Google Generative AI SDK.
* **Rate Limits:** Be mindful of Google's API rate limits.  Excessive requests may result in temporary or permanent account suspension.
* **Verbose Logging:** The script includes verbose logging (controlled by the `VERBOSE` environment variable). Set `VERBOSE=true` in your `.env` file to enable more detailed console output.


This documentation provides a comprehensive overview of the `aiEngine.js` file, enabling developers to effectively integrate and utilize its functionality.  Always refer to the latest documentation for the `@google/generative-ai` library for the most up-to-date information on API usage and limitations.
